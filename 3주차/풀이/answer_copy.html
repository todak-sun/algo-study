<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title></title>
  </head>
  <body>
    <script>
      const input = [
        "Enter uid1234 Muzi",
        "Enter uid4567 Prodo",
        "Leave uid1234",
        "Enter uid1234 Prodo",
        "Change uid4567 Ryan",
      ];

      function solution(record) {
        let ids = [];
        let history = [];
        for (let i = 0; i < record.length; i++) {
          // 01. 파싱
          let message = parseMessage(record[i]);
          console.log(message);

          switch (message.action) {
            case "enter":
              ids.push({
                id: message.id,
                nickname: message.nickname,
              });
              history.push({
                id: message.id,
                log: "님이 들어왔습니다.",
              });
              break;
            case "leave":
              ids.splice(
                ids.findIndex((item) => item.id === message.id),
                1
              );
              history.push({
                id: message.id,
                log: "님이 나갔습니다.",
              });
              break;
            case "change":
              ids = ids.map((item) => {
                if (item.id === message.id) {
                  item.nickname = message.nickname;
                }
                return item;
              });
              break;
            default:
          }
        }

        let answer = history.map(
          (event) =>
            `${ids.find((item) => item.id === event.id).nickname}${event.log}`
        );
        console.log(answer);
        return answer;
      }

      function parseMessage(message) {
        return {
          action: message.split(" ")[0].toLowerCase(),
          id: message.split(" ")[1],
          nickname: message.split(" ")[2] ? message.split(" ")[2] : null,
        };
      }
      // test
      solution(input);
    </script>
  </body>
</html>
